import React from 'react';
import { Cell as CellType } from '../types/game';
import '../styles/Cell.css';

interface CellProps {
  cell: CellType;
  onClick: () => void;
  onContextMenu: (e: React.MouseEvent) => void;
  readOnly?: boolean;
}

const Cell: React.FC<CellProps> = ({ cell, onClick, onContextMenu, readOnly }) => {
  const getCellContent = () => {
    if (cell.flagged) {
      return <img src="/assets/flag.svg" alt="Flag" className="cell-icon" />;
    }
    if (!cell.revealed) {
      return null;
    }
    if (cell.hasMine) {
      return <img src="/assets/mine.svg" alt="Mine" className="cell-icon mine" />;
    }
    if (cell.minesAround > 0) {
      return <span className={`number n${cell.minesAround}`}>{cell.minesAround}</span>;
    }
    return null;
  };

  const className = `cell ${cell.revealed ? 'revealed' : 'hidden'} ${cell.flagged ? 'flagged' : ''} ${cell.exploded ? 'exploded' : ''}`;

  return (
    <div
      className={className}
      onClick={!readOnly ? onClick : undefined}
      onContextMenu={!readOnly ? onContextMenu : undefined}
    >
      {getCellContent()}
    </div>
  );
};

export default Cell;
